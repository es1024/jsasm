{"version":3,"sources":["webpack:///webpack/bootstrap 4649b88c0a2730a815f7","webpack:///./src/address.ts","webpack:///./src/index.ts","webpack:///./src/error/sigbase.ts","webpack:///./src/error/sigsegv.ts","webpack:///./src/memory.ts","webpack:///./src/x86.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4649b88c0a2730a815f7","const MIN_ADDR = 0;\nconst MAX_ADDR = 0x7FFFFFFF | 0;\n\nexport const TEXT_MASK = 0x10000000;\nexport const STACK_MASK = 0x40000000;\nexport const OFFSET_MASK = 0x0FFFFFFF;\n\nexport function isAddress(addr: number): boolean {\n  return addr === +addr && addr == (addr | 0) && MIN_ADDR <= addr &&\n      addr <= MAX_ADDR;\n}\n\n// 0001... = text, assumes addr is an address (31 bit number)\nexport function isTextAddress(addr: number): boolean {\n  return isAddress(addr) && (addr & TEXT_MASK) !== 0;\n}\n\n// 01..... = stack, assumes addr is an address (31 bit number)\nexport function isStackAddress(addr: number): boolean {\n  return (addr & STACK_MASK) !== 0;\n}\n\n// assumes addr is an address (31 bit number)\nexport function getAddressOffset(addr: number): number {\n  return (addr & OFFSET_MASK);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/address.ts","import {TEXT_MASK} from './address';\nimport MemoryManager from './memory';\nimport X86, {X86Flag} from './x86';\n\nlet mem: MemoryManager = null;\nlet x86Machine: X86 = null;\n\nfunction toHex(val: number): string {\n  if (val < 0) {\n    val = 0xFFFFFFFF + val + 1;\n  }\n  const tmp = '00000000' + val.toString(16).toUpperCase();\n  return tmp.substring(tmp.length - 8);\n}\n\nfunction syncRegs(): void {\n  const regs = x86Machine.getRegisters();\n  (<any> document).getElementById('reg-eax').value = toHex(regs.eax);\n  (<any> document).getElementById('reg-ecx').value = toHex(regs.ecx);\n  (<any> document).getElementById('reg-edx').value = toHex(regs.edx);\n  (<any> document).getElementById('reg-ebx').value = toHex(regs.ebx);\n  (<any> document).getElementById('reg-esi').value = toHex(regs.esi);\n  (<any> document).getElementById('reg-edi').value = toHex(regs.edi);\n  (<any> document).getElementById('reg-ebp').value = toHex(regs.ebp);\n  (<any> document).getElementById('reg-esp').value = toHex(regs.esp);\n  (<any> document).getElementById('reg-eip').value = toHex(regs.eip);\n  (<any> document).getElementById('reg-eflags').value = toHex(regs.eflags);\n}\n\nfunction syncFlags(): void {\n  (<any> document).getElementById('flg-cf').checked = x86Machine.getFlag(X86Flag.CF);\n  (<any> document).getElementById('flg-pf').checked = x86Machine.getFlag(X86Flag.PF);\n  (<any> document).getElementById('flg-af').checked = x86Machine.getFlag(X86Flag.AF);\n  (<any> document).getElementById('flg-zf').checked = x86Machine.getFlag(X86Flag.ZF);\n  (<any> document).getElementById('flg-sf').checked = x86Machine.getFlag(X86Flag.SF);\n  (<any> document).getElementById('flg-tf').checked = x86Machine.getFlag(X86Flag.TF);\n  (<any> document).getElementById('flg-if').checked = x86Machine.getFlag(X86Flag.IF);\n  (<any> document).getElementById('flg-df').checked = x86Machine.getFlag(X86Flag.DF);\n  (<any> document).getElementById('flg-of').checked = x86Machine.getFlag(X86Flag.OF);\n}\n\nfunction init(src: string): void {\n  mem = new MemoryManager({\n    textLength: 65536,\n    stackLength: 65536,\n  });\n\n  x86Machine = new X86(mem, {\n    eax: 0,\n    ecx: 0,\n    edx: 0,\n    ebx: 0,\n    esi: 0,\n    edi: 0,\n    ebp: 0,\n    esp: mem.getStackTopAddr(),\n    eip: mem.getTextBaseAddr(),\n    // lots of \"always 1\" flags\n    eflags: (1 << 1) | (1 << 12) | (1 << 13) | (1 << 14) | (1 << 15),\n  });\n\n  src = src.toUpperCase().replace(/[^\\dA-F]/g, '');\n  const words = src.match(/.{1,8}/g);\n  for (let i = 0; i < words.length; ++i) {\n    mem.writeWord(TEXT_MASK | (i << 2), parseInt(words[i], 16));\n  }\n}\n\nfunction run(): void {\n\n}\n\nfunction step(): void {\n  if (x86Machine == null) {\n    init((<any> document).getElementById('x86-src').value);\n  }\n  x86Machine.step();\n  syncRegs();\n  syncFlags();\n}\n\nfunction stop(): void {\n\n}\n\n(<any> window).run = run;\n(<any> window).step = step;\n(<any> window).stop = stop;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","export default class SIGBASE extends Error {\n  constructor(m: string) {\n    super(m);\n    Object.setPrototypeOf(this, SIGBASE.prototype);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/sigbase.ts","import SIGBASE from './sigbase';\n\nexport default class SIGSEGV extends SIGBASE {\n  constructor(m: string) {\n    super(m);\n    Object.setPrototypeOf(this, SIGSEGV.prototype);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/error/sigsegv.ts","import {getAddressOffset, isTextAddress, isStackAddress} from './address';\nimport {TEXT_MASK, STACK_MASK} from './address';\nimport SIGSEGV from './error/sigsegv';\n\ninterface SegmentLength {\n  textLength: number;\n  stackLength: number;\n}\n\nexport default class MemoryManager {\n  private text: Uint32Array;\n  private stack: Uint32Array;\n\n  constructor(sl: SegmentLength) {\n    this.text = new Uint32Array(sl.textLength >> 2);\n    this.stack = new Uint32Array(sl.stackLength >> 2);\n  }\n\n  getTextBaseAddr(): number {\n    return TEXT_MASK;\n  }\n\n  getTextTopAddr(): number {\n    return TEXT_MASK | (this.text.length << 2);\n  }\n\n  getStackBaseAddr(): number {\n    return STACK_MASK;\n  }\n\n  getStackTopAddr(): number {\n    return STACK_MASK | (this.stack.length << 2);\n  }\n\n  readWord(addr: number): number {\n    let offset = getAddressOffset(addr);\n    if ((offset & 0x3) != 0) {\n      throw new SIGSEGV('malaligned address');\n    }\n    offset >>= 2;\n    if (isTextAddress(addr)) {\n      if (offset >= this.text.length) {\n        throw new SIGSEGV('text segment address out of bounds');\n      }\n      return this.text[offset];\n    } else if (isStackAddress(addr)) {\n      if (offset >= this.stack.length) {\n        throw new SIGSEGV('stack segment address out of bounds');\n      }\n      return this.stack[offset];\n    }\n    throw new SIGSEGV('bad address');\n  }\n\n  writeWord(addr: number, value: number): void {\n    let offset = getAddressOffset(addr);\n    if ((offset & 0x3) != 0) {\n      throw new SIGSEGV('malaligned address');\n    }\n    offset >>= 2;\n    if (isTextAddress(addr)) {\n      if (offset >= this.text.length) {\n        throw new SIGSEGV('text segment address out of bounds');\n      }\n      this.text[offset] = value;\n    } else if (isStackAddress(addr)) {\n      if (offset >= this.stack.length) {\n        throw new SIGSEGV('stack segment address out of bounds');\n      }\n      this.stack[offset] = value;\n    } else {\n      throw new SIGSEGV('bad address');\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/memory.ts","import MemoryManager from './memory';\n\nexport interface X86Registers {\n  eax: number;\n  ecx: number;\n  edx: number;\n  ebx: number;\n  esi: number;\n  edi: number;\n  ebp: number;\n  esp: number;\n  eip: number;\n  eflags: number;\n  // TODO: segment registers\n}\n\nexport const enum X86Flag {\n  CF = 0,\n  PF = 2,\n  AF = 4,\n  ZF = 6,\n  SF = 7,\n  TF = 8,\n  IF = 9,\n  DF = 10,\n  OF = 11,\n}\n\nexport default class X86 {\n  private regs: X86Registers;\n  private mem: MemoryManager;\n\n  constructor(mem: MemoryManager, regs: X86Registers) {\n    this.mem = mem;\n    this.regs = regs;\n  }\n\n  getRegisters(): X86Registers {\n    return this.regs;\n  }\n\n  getFlag(flag: X86Flag): boolean {\n    return (this.regs.eflags & (1 << <number>flag)) !== 0;\n  }\n\n  step(): void {\n    // TODO: this\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/x86.ts"],"sourceRoot":""}